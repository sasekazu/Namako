# Namako
## What is Namako
Namako is a Unity plugin for object deformation based on the finite element method. It provides basic mesh-generation capabilities, supports rigid–soft body contact, and enables haptic rendering through virtual coupling.
The word "namako" means "sea cucumber" in Japanese.

## Installation
- Download the unitypackage from the release page (TBD) and import it into your Unity project.
- “Namako” will appear in the Editor menu.


## How to Use

### Model Preparation
- Before running the simulation, you need a mesh for deformation analysis. You have two options:
  - A mesh generated from a **triangular surface mesh** such as OBJ or STL. In this guide, we assume you start from a triangular mesh.
  - A **tetrahedral mesh** generated by Gmsh in **.msh (Version 2 ASCII)** format. See [Using pre-generated tetrahedral mesh](#using-pre-generated-tetrahedral-mesh).
- The deformable mesh is expected to be **watertight**, as required by the collision detection algorithm implemented in Namako.
- For your first test, you can use `lowpoly-bunny.obj` in the `SampleResources` folder.
- The recommended unit is **meters [m]**, meaning that 1 unit in Unity corresponds to 1 m. As a result, the model will appear very small under Unity’s default scale. See [General tips](#general-tips) for guidance on manipulating small objects more easily.

### Basic flow

- Mesh generation
  - Put a mesh model (such as obj) into the scene hirarchy
  - **Enable Read/Write** checkbox in the inspector of the mesh
  - Determin the initial transformation by moving, rotating, scaling the model as you want.
  - Open **"Namako/Tools/Namako Mesh Tool"** from the menu bar.
  - Drag the mesh model from the hierarchy to **"Visual Mesh Object"** in the mesh tool.
  - (Option) Specify "Divisions". Higher value generates finer mesh.
  - Push **"Generate Mesh"** button.
  - You should see the wireframe of the tetrahedral mesh overlaid to your model.
  - "NamakoSolverManager" and "TetraMesh" in the hierarchy, which are used for furthuer detailed settings.
- Rigid body placement
  - Put a rigi body object into your scene. For a trial, you can use just a simple cube created by right click on the herarcy.
  - Attatch **"Namako Rigid Body"** component to the object.
- Run
  - Run the scene and move the object in the scene editor.
  - You should see the mesh is deformed according to the colision with the rigid object.
  - Since this is one-way collision algorithm, you can move the rigid object explicitly by using e.g. script. Or conbination with motion capture systems such as Leap Motion Controller and OptiTrack camera etc.

### Simulation settings
TBD

### Haptic rendering
TBD

### Using pre-generated tetrahedral mesh
TBD

### General Tips
- If the object appears very small in the editor, I recommend first selecting the mesh model and pressing the **F** key to focus on it. This makes 3D navigation easier. You can also reduce the size of 3D icons if they obstruct your view of the scene.
